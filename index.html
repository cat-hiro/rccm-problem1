<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>暗記レベルドリル</title>
<style>
  :root {
    --bg1:#e0fbff; --bg2:#e5ffe8;
    --primary:#0ea5e9; /* blue-500 */
    --accent:#10b981;  /* green-500 */
    --danger:#ef4444;  /* red-500 */
    --ok:#16a34a;      /* green-600 */
    --text:#0f172a;    /* slate-900 */
  }
  html,body {
    margin:0; padding:0; height:100%; color:var(--text); font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Hiragino Sans', 'Noto Sans JP', 'Yu Gothic', 'Meiryo', sans-serif;
    background: linear-gradient(135deg, var(--bg1), var(--bg2));
  }
  header {
    position: sticky; top: 0; z-index: 10;
    background: linear-gradient(90deg, var(--primary), var(--accent));
    color: white; padding: 14px 16px; font-weight: 700; font-size: 18px; letter-spacing: 0.03em;
    box-shadow: 0 4px 12px rgba(0,0,0,.12);
  }
  main { padding: 12px; max-width: 980px; margin: 0 auto 80px; }
  .card {
    background: #fff; border-radius: 16px; box-shadow: 0 8px 30px rgba(0,0,0,.08);
    padding: 14px; margin-bottom: 12px;
  }
  .row { display:flex; gap:10px; flex-wrap: wrap; align-items: center; }
  select, button, textarea, input[type="text"] {
    font-size: 16px;
  }
  select, button {
    border: 1px solid #e5e7eb; border-radius: 12px; padding: 10px 12px; background: #fff;
  }
  button.primary { background: linear-gradient(90deg, var(--primary), var(--accent)); color: #fff; border: none; }
  button.ghost { background: transparent; border: 1px solid #cbd5e1; }
  button.warn { background: var(--danger); color:#fff; border:none; }
  button:disabled { opacity: .5; }
  .muted { color: #64748b; }
  .label { font-size: 12px; color:#475569; margin-bottom: 6px; font-weight:600; }
  .pill { background:#f1f5f9; border-radius:999px; padding:6px 10px; font-size: 12px; color:#334155; }
  .flex { display:flex; gap:10px; align-items:center; flex-wrap: wrap; }
  .grow { flex:1; }
  .textarea {
    width:100%; min-height: 130px; resize: vertical; border:1px solid #e5e7eb; border-radius:12px; padding:10px 12px; line-height: 1.7;
    background: #fcfcfd;
  }
  .mono { font-family: ui-monospace, Menlo, Consolas, 'SF Mono', 'Cascadia Code', monospace; }
  .masked { white-space: pre-wrap; line-height:1.9; padding:12px; background:#f8fafc; border-radius:12px; border:1px dashed #cbd5e1; }
  .answer { white-space: pre-wrap; line-height:1.9; padding:12px; background:#ecfeff; border-radius:12px; border:1px solid #67e8f9; }
  .ok { color: var(--ok); font-weight:700; }
  .ng { color: var(--danger); font-weight:700; }
  .footer {
    position: fixed; bottom:0; left:0; right:0; padding:10px 12px; background:rgba(255,255,255,.9);
    box-shadow: 0 -6px 20px rgba(0,0,0,.12); backdrop-filter: blur(6px);
  }
  .footer .row { justify-content: space-between; }
  .small { font-size: 12px; }
</style>
</head>
<body>
<header>暗記レベルドリル</header>
<main>
  <div class="card">
    <div class="row">
      <div class="grow">
        <div class="label">テーマ</div>
        <select id="theme"></select>
      </div>
      <div>
        <div class="label">① / ②</div>
        <select id="sub"></select>
      </div>
      <div>
        <div class="label">項目</div>
        <select id="item"></select>
      </div>
      <div>
        <div class="label">レベル</div>
        <select id="level">
          <option value="1">Lv.1</option>
          <option value="2">Lv.2</option>
          <option value="3">Lv.3</option>
          <option value="4">Lv.4</option>
          <option value="5">Lv.5</option>
        </select>
      </div>
      <div><span id="progress" class="pill">進捗 0/5</span></div>
    </div>
  </div>

  <div id="headingCard" class="card">
    <div class="label">見出し</div>
    <div id="heading" class="muted"></div>
  </div>

  <div id="maskedCard" class="card">
    <div class="label">ヒント（Lv.1/2/4 で表示）</div>
    <div id="masked" class="masked mono"></div>
  </div>

  <div class="card">
    <div class="label">本文をここに入力（完全一致で正解 / 空白・改行は無視）</div>
    <textarea id="answerInput" class="textarea mono" placeholder="ここに本文を入力"></textarea>
    <div class="row" style="margin-top:8px;">
      <button id="checkBtn" class="primary">答え合わせ</button>
      <button id="showBtn" class="ghost">原文を表示</button>
      <span id="result" class="muted"></span>
    </div>
    <div id="original" class="answer mono" style="display:none; margin-top:8px;"></div>
  </div>

  <div class="card">
    <div class="label">リセット</div>
    <div class="row">
      <button id="resetItem" class="ghost">この課題をLv1にリセット</button>
      <button id="resetTheme" class="ghost">このテーマをリセット</button>
      <button id="resetAll" class="warn">すべてリセット</button>
      <span class="small muted">進捗は端末の localStorage に保存されます</span>
    </div>
  </div>
</main>

<div class="footer">
  <div class="row">
    <div class="small muted">iPhone向けUI / 2025-08-29</div>
    <div class="flex">
      <button id="prevBtn" class="ghost">◀ 前</button>
      <button id="nextBtn" class="ghost">次 ▶</button>
    </div>
  </div>
</div>

<script>
const DATA = [{"id": "１", "title": "（１）カーボンニュートラルに関する目標達成までの道筋", "subs": [{"id": "①", "title": "①カーボンニュートラルの現状と課題", "items": [{"no": 1, "heading": "気候変動対策の加速化への道筋", "text": "現在、「地球温暖化」による気候変動は世界的な喫緊の問題となっており、政府は2050年ま でにカーボンニュートラルを実現することを宣言している。その一環として、政府は「グリー ン成長戦略」を策定し、14の重点分野において産業政策と環境政策を統合して推進している。 しかし、現状では温室効果ガスの削減ペースが目標水準を下回っている。このため、エネルギ ー転換、産業構造の変革、ライフスタイルの変化を同時に進めることが課題である。"}, {"no": 2, "heading": "持続可能なエネルギー基盤の構築", "text": "「再生可能エネルギー」の導入拡大は着実に進んでいるものの、電力供給の安定性確保や系 統制約の問題がある。現在の「再生可能エネルギー」比率は約20％であり、2030年度の36～ 38％目標達成には大幅な加速が必要である。「グリーントランスフォーメーション政策(GX)」と して、官民で150兆円規模の投資が計画されている。このため、技術開発と制度改革、インフ ラ整備を一体的に進め、「脱炭素」とエネルギー安全保障を両立することが課題である。"}, {"no": 3, "heading": "社会全体での「脱炭素」化の推進", "text": "産業界においては製造プロセスの見直しや省エネルギー技術の導入が進められているが、中 小企業への技術の普及や初期投資の負担といった問題がある。また、国民の意識改革と行動変 容を促す教育・啓発活動も不十分である。このため、「脱炭素」型ライフスタイルへの転換支援 制度と、地域特性を活かした分散型エネルギーシステムの構築により、地域循環共生圏を形成 することが課題である。"}]}, {"id": "②", "title": "②カーボンニュートラルの目標達成に向けた建設コンサルタントの役割", "items": [{"no": 1, "heading": "持続可能な社会基盤の設計・提案", "text": "建設コンサルタントは「グリーン社会」の実現に向けて、環境負荷を最小限に抑えた社会基 盤の設計・提案において、中核的な役割を担っている。「再生可能エネルギー」施設の立地選定 や系統連系の技術的検討、スマートシティの都市計画、グリーンインフラの導入提案などを通 じて、「脱炭素」型の地域づくりに貢献していく必要がある。また、既存インフラの長寿命化や 効率化により、建設・維持管理段階でのCO2排出削減を実現することが求められている。"}, {"no": 2, "heading": "環境配慮型建設技術の推進", "text": "建設コンサルタントは「低炭素建設資材」の選定や活用方法の提案を通じて、建設プロジェ クト全体の環境負荷削減に貢献している。「ライフサイクルアセスメント」の手法を用いて、建 設資材の製造から廃棄までの全工程における環境影響を定量的に評価し、最適な材料選択や工 法の提案を行うことが重要である。リサイクル材料の活用促進、建設廃棄物の削減、施工時の 省エネルギー化などを総合的に検討し、建設業界全体の「脱炭素」化をリードしていく必要が ある。"}, {"no": 3, "heading": "技術革新と政策提言", "text": "建設コンサルタントは技術的専門知識を活かし、カーボンニュートラルの実現に向けた新技 術の開発・実用化や政策提言において重要な役割を果たすべきである。気候変動の適応策と緩 和策を統合したソリューションの提供、地域特性を踏まえた「脱炭素」シナリオの策定、産学 官連携による技術開発の推進などを通じて、社会全体の持続可能な発展に貢献することが期待 されている。"}]}]}, {"id": "２", "title": "（２）国際競争力の強化", "subs": [{"id": "①", "title": "①我が国の建設コンサルタントの国際競争の現状と課題", "items": [{"no": 1, "heading": "グローバル市場での競争環境", "text": "我が国の建設コンサルタントは、アジア・アフリカを中心とした新興国市場で一定の存在感 を示しているが、欧米系大手コンサルタントとの競争が激化している。急速に都市化が進む途 上国では、総合的な都市開発プロジェクトの需要が高まっている一方、日本企業の受注規模は 限定的である。現状では、技術力は高く評価されているものの、プロジェクトマネジメント能 力や提案力において不足が見られる。このため、大型案件での競争力向上が課題である。"}, {"no": 2, "heading": "技術標準化への対応不足", "text": "日本の建設コンサルタントが海外展開する際の大きな障壁として、「国際標準」への対応不足 が挙げられる。国内で培った高度な技術や品質管理手法は優れているものの、各国の法規制や 設計基準、環境基準への適応に時間とコストを要している。ISO規格やIFC基準などの「国際標 準」に準拠した業務プロセスの構築が不十分である。このため、グローバル企業としての信頼 性確保と、現地条件に適した技術の現地化が課題である。"}, {"no": 3, "heading": "人材とネットワークの制約", "text": "海外プロジェクトを円滑に遂行するために必要な、国際的な人材が不足しており、深刻な状 況にある。特に、語学力、異文化コミュニケーション能力、現地法規制への理解を兼ね備えた 人材が不足している。また、現地政府機関や民間企業とのネットワーク構築も不十分である。 そのため、「人材育成」の推進と情報収集力や営業力の強化が課題である。"}]}, {"id": "②", "title": "②我が国の建設コンサルタントの国際競争への参入に向けた取り組み", "items": [{"no": 1, "heading": "政府支援制度の活用と連携強化", "text": "「ODA」や円借款を活用したインフラ開発プロジェクトへの参画は、日本の建設コンサルタン トにとって重要な海外展開の機会となっている。政府は「官民連携」を推進し、JICA、JETRO、 NEXIなどの支援機関を通じて、案件形成から資金調達まで一貫したサポート体制を構築してい る。また、相手国政府との政策対話や技術協力を通じて、日本の技術や設計思想の普及を図 り、受注機会の拡大に努めている。"}, {"no": 2, "heading": "災害対策技術の優位性活用", "text": "日本が世界に誇る「防災」技術や災害復旧ノウハウは、自然災害リスクの高い地域で高く評 価されている。地震、津波、台風などの災害対策技術、早期警戒システム、災害に強いインフ ラ設計などの分野において、日本の建設コンサルタントは独自の競争優位性を有している。こ れらの専門技術を活かし、気候変動による災害リスクが増大する世界各地でレジリエントなイ ンフラ構築に貢献し、新たな市場開拓を進めている。"}, {"no": 3, "heading": "戦略的な海外展開の推進", "text": "「インフラ輸出」戦略の一環として、建設コンサルタントは、技術移転や現地人材の育成を 通じて、持続可能な事業展開を図っている。単発的なプロジェクト受注から、長期的なパート ナーシップに基づく継続的な関係構築へと戦略の転換が進められている。また、デジタル技術 やAI、IoTを活用したスマートインフラの提案により、従来の土木技術に加えて付加価値の高 いサービスの提供にも取り組んでいる。"}]}]}, {"id": "３", "title": "（３）維持管理と長寿命化", "subs": [{"id": "①", "title": "①社会インフラの維持管理の現状と課題", "items": [{"no": 1, "heading": "インフラの急速な劣化と財政制約", "text": "我が国の社会インフラは、高度経済成長期に集中的に整備された結果、現在では「老朽化」 が急速に進行している。建設から50年以上が経過した道路橋やトンネル、上下水道施設の数が 増加し、今後20年間でさらに拡大する見込みである。一方で、国や「地方公共団体」の財政状 況は依然として厳しく、必要な維持管理費用の確保が困難である。特に人口減少が進む地方部 では、税収減少と維持管理費の増加が同時に進行しており、インフラの安全性を確保するため の取り組みが課題である。"}, {"no": 2, "heading": "維持管理体制の不備と技術力不足", "text": "多くの自治体では、インフラの点検や劣化診断、補修工法の選定に対応できる専門職員が不 足しており、適切な維持管理体制が整っていない。維持管理に関するデータの蓄積や分析も進 まず、効率的な維持管理計画の策定が困難な状況である。また、施設ごとに所管部署が異なる ケースが多く、横断的・総合的な戦略の構築も進んでいない。このような現状から、体制整備 と技術力の向上が課題である。"}, {"no": 3, "heading": "コスト管理と優先順位付けの困難", "text": "限られた財源の中で持続的な維持管理を実現するためには、「ライフサイクルコスト」の考え 方に基づいた長期的な視点が不可欠である。しかし、多くの自治体では依然として事後保全型 の対応が中心で、コストの最適化が十分に図られていない。膨大なインフラ施設の中から、緊 急性や重要性に応じた優先順位を適切に設定することが難しく、住民生活や経済活動への影響 を考慮した評価手法の整備が課題である。"}]}, {"id": "②", "title": "②社会インフラの長寿命化のあり方について", "items": [{"no": 1, "heading": "予防保全型維持管理への転換", "text": "従来の事後保全中心の対応から、「予防的処置」を重視した維持管理への転換が急務である。 定期的な点検・診断を通じて劣化の兆候を早期に把握し、適切なタイミングで補修・補強を行 うことで、施設の機能を長期にわたり維持することが可能となる。これにより、大規模修繕の 頻度やコストを抑制し、使用停止による社会的影響の軽減にもつながる。"}, {"no": 2, "heading": "技術革新による効率化の推進", "text": "「新技術」の導入は、維持管理の効率化と高度化に大きく貢献する。AIやドローンを活用し た点検の自動化、IoTセンサーによるリアルタイム監視、ビッグデータを用いた劣化予測などが 代表例である。さらに、新材料や新工法を導入することで、インフラの耐久性向上や補修作業 の合理化が可能となる。これらの技術を積極的に取り入れ、持続可能な維持管理体制を確立す ることが求められる。"}, {"no": 3, "heading": "戦略的な「更新」と機能向上", "text": "施設の「更新」にあたっては、単なる原状復旧にとどまらず、将来の社会ニーズや環境変化 を見据えた機能向上が求められる。人口減少や高齢化、気候変動、デジタル化の進展に対応 し、必要な機能の見直しや施設統廃合を検討することが重要である。また、最新の技術基準や 環境基準への適合を図り、地域特性に応じた柔軟な整備手法を取り入れ、効果的かつ持続可能 な「更新」を推進する必要がある。"}]}]}, {"id": "４", "title": "（４）工程管理と働き方改革", "subs": [{"id": "①", "title": "①建設コンサルタントの工程管理の現状と課題", "items": [{"no": 1, "heading": "工程管理手法の精度向上", "text": "建設コンサルタント業務における工程管理は、複雑で専門性の高い業務特性により、困難を 伴うことが多い。現状では「工程表」の作成段階で、業務の詳細な作業内容や所要時間の見積 もりが不十分であり、実際の進捗との乖離が生じやすい。設計業務や調査業務では、現地条件 の変化や関係機関との協議により作業量が大きく変動するため、当初計画の修正が頻繁に発生 している。さらに、複数の専門分野が関わる大規模プロジェクトでは、各分野間の連携や依存 関係の把握が不十分である。このため、工程計画の精度向上と全体最適化の実現が課題であ る。"}, {"no": 2, "heading": "「履行期間」の適正化", "text": "発注者から設定される「履行期間」が業務内容に対して過度に短い場合が多く、適切な工程 管理を困難にしている。短期間での業務完了を求められることで、十分な検討時間を確保でき ず、業務品質の低下や手戻り作業が発生している。「履行期間」の制約により、必要な現地調査 や関係機関との協議が不十分となり、後工程に悪影響を及ぼしている。このため、適正な「履 行期間」の設定と効率的な工程管理手法の確立が課題である。"}, {"no": 3, "heading": "「情報共有」システムの構築", "text": "プロジェクト関係者間での「情報共有」が不十分な状況にある。発注者、設計者、施工者、 関係機関などのステークホルダー間で、進捗状況や課題、変更事項などが適切に共有されてお らず、その結果、工程の遅延や手戻りが発生している。また、社内においても、異なる専門分 野間での「情報共有」が十分とはいえない。このため、リアルタイムで進捗を管理できる「情 報共有」システムの構築が課題である。"}]}, {"id": "②", "title": "②建設コンサルタントの働き方改革と工程管理のあり方", "items": [{"no": 1, "heading": "「長時間労働」の是正と効率的な業務運営", "text": "建設コンサルタント業界では「長時間労働」が常態化しており、働き方改革が急務である。 適切な工程管理により業務の平準化を図り、特定の時期や個人への業務集中を避けることで、 労働時間の短縮を実現する必要がある。さらに、業務の標準化や効率化を進め、同じ成果をよ り短時間で達成できる体制を構築することが重要である。"}, {"no": 2, "heading": "「生産性向上」と業務プロセスの改善", "text": "「生産性向上」を実現するためには、従来の業務プロセスを見直し、効率的な工程管理手法 を導入することが重要である。デジタル技術を活用した工程管理システムの導入により、リア ルタイムでの進捗把握と迅速な意思決定を可能とする体制の構築が求められる。過去のプロジ ェクトデータを活用した工程計画の精度向上や、標準的な業務手順の確立により、計画的で効 率的な業務遂行を実現できる。"}, {"no": 3, "heading": "「ワークライフバランス(WLB)」の実現", "text": "「ワークライフバランス(WLB)」の実現には、計画的な工程管理と柔軟な働き方の両立が不可 欠である。「ワークライフバランス(WLB)」の考え方を取り入れ、週単位での業務計画と進捗管 理を徹底することで、計画的な業務遂行と適切な休暇取得を両立できる。テレワークやフレッ クスタイム制度を活用することで、個人のライフスタイルに応じた柔軟な働き方を実現しつ つ、プロジェクト全体の工程管理を適切に行う体制の構築が重要である。"}]}]}, {"id": "５", "title": "（５）建設コンサルタントにおける人材育成", "subs": [{"id": "①", "title": "①建設コンサルタントの人材育成の現状と課題", "items": [{"no": 1, "heading": "人材確保の困難と業界の魅力向上", "text": "建設コンサルタント業界では、少子高齢化と他業界との人材獲得競争により、「担い手確保」 が困難な状況にある。理工系学生の就職先として、IT業界や製造業と比較して認知度や魅力度 が低く、優秀な人材の確保が進んでいない。さらに、業界全体のイメージが古く、働き方や将 来性に対する学生の理解が不足している。地方企業では都市部企業との待遇格差も存在してい る。このため、業界の魅力向上と認知度の拡大が課題である。"}, {"no": 2, "heading": "若手技術者の早期離職と定着率向上", "text": "入社後の「若手技術者の育成」において、期待と現実のギャップによる早期離職が発生して いる。新入社員は高度な専門知識と実務経験を同時に習得する必要があるが、適切な指導体制 や段階的な育成プログラムが整備されていない企業が多い。さらに、繁忙期の長時間労働や責 任の重い業務への早期投入により、若手技術者が過度なストレスを感じている。このため、成 長実感を得られる環境づくりと適切なキャリアパスの提示が課題である。"}, {"no": 3, "heading": "体系的な育成システムの不備", "text": "多くの企業では人材育成が属人的で場当たり的な対応となっている。「研修制度」が不十分で あり、技術力向上のための継続的な学習機会が限られている。さらに、中小企業では人材育成 に割ける時間や予算が限られており、「オン・ザ・ジョブ・トレーニング(OJT)」中心の育成に 依存している状況にある。このため、体系的な育成システムの構築と継続的な学習機会の確保 が課題である。"}]}, {"id": "②", "title": "②建設コンサルタントの今後の人材育成のあり方", "items": [{"no": 1, "heading": "実践的な育成プログラムの構築", "text": "効果的な人材育成には、「オン・ザ・ジョブ・トレーニング(OJT)」と体系的な研修を組み合 わせた実践的な育成プログラムの構築が重要である。実際のプロジェクトを通じて技術力と実 務能力を同時に向上させるとともに、定期的な研修により理論的な知識の補強を図る必要があ る。さらに、段階的なスキルアップを可能とするキャリアラダーの設定により、技術者が成長 を実感できる環境を整備することが求められる。"}, {"no": 2, "heading": "多様性を活かした組織づくり", "text": "「多様な人材」の活用により、組織全体の創造性と問題解決能力の向上を高めることが重要 である。女性技術者、外国人技術者、中途採用者など、異なる背景を持つ人材がそれぞれの強 みを発揮できる環境づくりが求められる。働き方の多様化に対応し、個人のライフスタイルに 応じた柔軟な勤務形態を提供することで、優秀な人材の確保と定着を実現する必要がある。"}, {"no": 3, "heading": "持続可能な働き方と生産性の両立", "text": "「生産性向上」と「ワークライフバランス(WLB)」の両立により、魅力的な職場環境を整備す ることが人材育成の基盤となる。デジタル技術の活用による業務効率化や標準化された業務プ ロセスの導入により、同じ成果をより短時間で達成できる体制を構築する必要がある。また、 「建設コンサルタントの役割」が社会インフラの持続的な発展に不可欠であることを明確に示 し、技術者としての誇りと使命感を醸成することで、長期的なキャリア形成への意欲を高める ことが求められる。"}]}]}, {"id": "６", "title": "（６）ICT,IoT,AI技術の利活用", "subs": [{"id": "①", "title": "①我が国における建設生産性向上のためのICT利活用の現状と課題", "items": [{"no": 1, "heading": "建設現場でのICT導入の進展と限界", "text": "建設業界では、i-Constructionの推進により、測量・設計・施工・検査の各段階でICT技術 の導入が進んでいる。ドローンによる3次元測量や情報化施工機械の活用により、作業効率の 向上と品質の安定化が図られている。また、「BIM/CIM」の導入により、設計から施工、維持管 理まで一貫したデータ活用が可能となりつつある。しかし、中小企業における導入率は依然と して低く、初期投資コストや技術者不足が障壁となっている。このため、中小企業への技術普 及と人材育成の推進が課題である。"}, {"no": 2, "heading": "「働き方改革」とデジタル化の推進", "text": "建設業界では「長時間労働」が常態化しており、「働き方改革」の実現が急務となっている。 ICT技術の活用により業務効率化を図り、労働時間の短縮を目指す取り組みが進められている。 また、「緊急事態宣言」下では、「テレワーク」や「Web会議」の導入が急速に進み、従来の働き 方の見直しが加速した。しかし、現場作業が中心の建設業では完全な「テレワーク」化は困難 である。このため、建設業の特性に応じた柔軟な働き方を実現することが課題である。"}, {"no": 3, "heading": "ICT基盤整備と技術者育成の遅れ", "text": "建設現場における「ネットワーク環境」の整備は進んでいるものの、地方や山間部では通信 インフラが不十分である。さらに、ICT技術を効果的に活用できる技術者が不足しており、中高 年層におけるデジタルスキルの習得も遅れている。加えて、企業間でのデータ連携や標準化が 不十分であり、情報の分断が生産性向上の阻害要因となっている。このため、ICT基盤の充実と 人材育成プログラムの確立が課題である。"}]}, {"id": "②", "title": "②我が国の建設業、建設コンサルタント業におけるICT、IoT、AI技術の活用方策", "items": [{"no": 1, "heading": "統合的なデジタルプラットフォームの構築", "text": "建設プロジェクト全体の情報一元管理と共有を実現するためには、「BIM/CIM」を基盤とした 統合的なデジタルプラットフォームの構築が重要である。設計段階から施工、維持管理まで一 貫したデータ活用を行うことで、品質向上とコスト削減が可能となる。さらに、AI技術を活用 した設計最適化や施工計画の自動生成により、技術者の負担軽減と生産性向上を実現できる。"}, {"no": 2, "heading": "自動化技術と「RPA」の導入推進", "text": "建設現場の作業自動化を推進するためには、IoT技術を活用した建設機械の遠隔操作や自動運 転技術の導入を進める必要がある。事務作業では「RPA」の導入により、定型的な業務を自動化 し、技術者がより創造的な業務に集中できる環境を整備することが重要である。さらに、AI技 術を活用した品質管理や安全管理システムの導入により、人的ミスの削減と作業効率の向上を 実現できる。"}, {"no": 3, "heading": "人材育成とデジタル変革の推進", "text": "ICT、IoT、AI技術の効果的な活用には、これらの技術に精通した人材の育成が不可欠であ る。産学官連携による教育プログラムの充実や、現場技術者のリスキリング支援を強化する必 要がある。また、デジタルネイティブ世代の採用と、ベテラン技術者の知識・経験のデジタル 化による技術継承が重要である。"}]}]}];

function $(id){return document.getElementById(id)}
const ddTheme = $("theme"), ddSub=$("sub"), ddItem=$("item"), ddLevel=$("level");
const maskedEl = $("masked"), origEl = $("original"), headingEl=$("heading"), maskedCard = $("maskedCard");
const inputEl = $("answerInput"), resultEl = $("result"), progressEl = $("progress");

const key = (t, s, i) => `memorizer_progress_${t}_${s}_${i}`;
function saveProgress(t,s,i,level){
  localStorage.setItem(key(t,s,i), String(level));
  updateProgressPill();
}
function loadProgress(t,s,i){
  const v = parseInt(localStorage.getItem(key(t,s,i))||"1",10);
  return Math.min(Math.max(v,1),5);
}
function resetItem(t,s,i){ localStorage.removeItem(key(t,s,i)); }
function resetTheme(t){
  for(const sub of DATA[t].subs){
    for(const it of sub.items) localStorage.removeItem(key(t, sub.id, it.no));
  }
}
function resetAll(){
  Object.keys(localStorage).filter(k=>k.startsWith("memorizer_progress_")).forEach(k=>localStorage.removeItem(k));
}

function normText(s){
  if(!s) return "";
  return s.replace(/[ \t\u3000]+/g,"")
          .replace(/\r?\n/g,"")
          .trim();
}

// Mask rules
const COMMON_MASK_WORDS = [
  "政府","日本","我が国","建設コンサルタント","地方公共団体","国際標準","脱炭素","カーボンニュートラル","グリーン成長戦略",
  "再生可能エネルギー","エネルギー安全保障","BIM/CIM","AI","ICT","IoT","気候変動"
];

function maskL1(text){
  let out = text;
  for (const w of COMMON_MASK_WORDS.slice(0,5)) {
    out = out.replace(new RegExp(w,'g'), "□");
  }
  out = out.replace(/カーボンニュートラル/g, "□□□"); // 目立つよう
  out = out.replace(/気候変動/g, "□□"); 
  return out;
}
function maskL2(text){
  let out = maskL1(text);
  out = out.replace(/20(\d)\d年/g, "20$1□年"); // 2030,2050→20□年
  out = out.replace(/「[^」]+」/g, "「□」");
  out = out.replace(/(\d+)[～~](\d+)％/g, "□～□％");
  out = out.replace(/(\d+)(兆|億)?円/g, "□$2円");
  return out;
}
function maskL4(text){
  // Skeleton: keep particles and punctuation, mask other CJK chars and words
  return text.replace(/[\p{Script=Han}\p{Script=Hiragana}\p{Script=Katakana}\w]/gu, ch=>{
    if(/[はがをにでともへやよりからまでのでとしてにつきについてまたしかしこのそのため]/.test(ch)) return ch;
    if(/[。、，．・「」『』（）()%％～\-—– ]/.test(ch)) return ch;
    return "□";
  });
}

function getCurrent(){
  const t = ddTheme.selectedIndex;
  const s = ddSub.selectedIndex;
  const i = ddItem.selectedIndex;
  const level = parseInt(ddLevel.value,10);
  const theme = DATA[t]; const sub = theme.subs[s]; const item=sub.items[i];
  return {t,s,i,level, theme, sub, item};
}

function render(){
  const {t,s,i,level, theme, sub, item} = getCurrent();
  $("heading").textContent = `${theme.title} / ${sub.title} / ${item.no}.${item.heading}`;

  const text = item.text;
  let hint = "";
  if(level===1) hint = maskL1(text);
  else if(level===2) hint = maskL2(text);
  else if(level===4) hint = maskL4(text);
  maskedCard.style.display = (level===1 || level===2 || level===4) ? '' : 'none';
  maskedEl.textContent = hint;

  origEl.textContent = text;
  resultEl.textContent = "";
  inputEl.value = "";
  ddLevel.value = String(loadProgress(t, sub.id, item.no));
  updateProgressPill();
}

function updateProgressPill(){
  const {t,s,i} = getCurrent();
  const lv = loadProgress(t, DATA[t].subs[s].id, DATA[t].subs[s].items[i].no);
  progressEl.textContent = `進捗 Lv.${lv}/5`;
}

function populate(){
  // Fill dropdowns
  ddTheme.innerHTML = DATA.map((th,idx)=>`<option value="${idx}">${th.title}</option>`).join("");
  ddSub.innerHTML = DATA[0].subs.map((s,idx)=>`<option value="${idx}">${s.title}</option>`).join("");
  ddItem.innerHTML = DATA[0].subs[0].items.map((it,idx)=>`<option value="${idx}">${it.no}.${it.heading}</option>`).join("");
  ddLevel.value = "1";
}

function onThemeChange(){
  const t = ddTheme.selectedIndex;
  ddSub.innerHTML = DATA[t].subs.map((s,idx)=>`<option value="${idx}">${s.title}</option>`).join("");
  onSubChange();
}
function onSubChange(){
  const t = ddTheme.selectedIndex; const s = ddSub.selectedIndex;
  ddItem.innerHTML = DATA[t].subs[s].items.map((it,idx)=>`<option value="${idx}">${it.no}.${it.heading}</option>`).join("");
  ddLevel.value = String(loadProgress(t, DATA[t].subs[s].id, DATA[t].subs[s].items[0].no));
  render();
}
function onItemChange(){
  const {t,s,i} = getCurrent();
  ddLevel.value = String(loadProgress(t, DATA[t].subs[s].id, DATA[t].subs[s].items[i].no));
  render();
}
function onLevelChange(){
  // just re-render hint
  render();
}

$("resetItem").onclick = ()=>{ const {t,s,i} = getCurrent(); resetItem(t, DATA[t].subs[s].id, DATA[t].subs[s].items[i].no); ddLevel.value="1"; render(); };
$("resetTheme").onclick = ()=>{ const t = ddTheme.selectedIndex; resetTheme(t); render(); };
$("resetAll").onclick = ()=>{ if(confirm("すべての進捗を消去します。よろしいですか？")){ resetAll(); render(); } };

$("checkBtn").onclick = ()=>{
  const {t,s,i,level,theme,sub,item} = getCurrent();
  const ok = normText(inputEl.value) === normText(item.text);
  if(ok){
    resultEl.innerHTML = "✔ 正解！"; resultEl.className="ok";
    const current = loadProgress(t, sub.id, item.no);
    if(level <= current && current < 5){
      // advance
      saveProgress(t, sub.id, item.no, current+1);
      ddLevel.value = String(current+1);
    } else {
      saveProgress(t, sub.id, item.no, Math.max(current, level));
    }
    updateProgressPill();
  } else {
    resultEl.innerHTML = "✖ 不正解（空白・改行は無視して判定）"; resultEl.className="ng";
  }
};

$("showBtn").onclick = ()=>{
  origEl.style.display = origEl.style.display ? "" : "none";
  if(origEl.style.display){
    $("showBtn").textContent = "原文を隠す";
  } else {
    $("showBtn").textContent = "原文を表示";
  }
};

$("prevBtn").onclick = ()=>{
  const t=ddTheme.selectedIndex, s=ddSub.selectedIndex, i=ddItem.selectedIndex;
  if(i>0) ddItem.selectedIndex=i-1;
  else if(s>0){ ddSub.selectedIndex=s-1; onSubChange(); ddItem.selectedIndex=DATA[t].subs[s-1].items.length-1; }
  else if(t>0){ ddTheme.selectedIndex=t-1; onThemeChange(); ddSub.selectedIndex=DATA[t-1].subs.length-1; onSubChange(); ddItem.selectedIndex=DATA[t-1].subs[ddSub.selectedIndex].items.length-1;}
  onItemChange();
};
$("nextBtn").onclick = ()=>{
  const t=ddTheme.selectedIndex, s=ddSub.selectedIndex, i=ddItem.selectedIndex;
  const si_len = DATA[t].subs[s].items.length;
  if(i<si_len-1) ddItem.selectedIndex=i+1;
  else if(s < DATA[t].subs.length-1){ ddSub.selectedIndex=s+1; onSubChange(); ddItem.selectedIndex=0; }
  else if(t < DATA.length-1){ ddTheme.selectedIndex=t+1; onThemeChange(); ddSub.selectedIndex=0; onSubChange(); ddItem.selectedIndex=0; }
  onItemChange();
};

// Hook up dropdown changes
ddTheme.addEventListener('change', onThemeChange);
ddSub.addEventListener('change', onSubChange);
ddItem.addEventListener('change', onItemChange);
ddLevel.addEventListener('change', onLevelChange);

// Init
populate(); onThemeChange(); render();

</script>
</body>
</html>
